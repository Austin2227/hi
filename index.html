<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GitHub Auth Dashboard Part 1</title>
<style>
body{font-family:sans-serif;background:#f3f7fb;margin:0;padding:0;color:#0f1724;}
.container{display:flex;justify-content:center;align-items:center;min-height:100vh;}
.card{background:white;padding:28px;border-radius:14px;box-shadow:0 8px 30px rgba(16,24,40,0.08);max-width:400px;width:100%;}
h2{text-align:center;margin-bottom:12px;}
p.muted{text-align:center;color:#6b7280;margin-bottom:18px;}
form{display:flex;flex-direction:column;gap:12px;}
input, select{padding:12px;border-radius:10px;border:1px solid #e6eef6;font-size:15px;}
button{padding:12px;border-radius:10px;border:none;background:#2563eb;color:white;font-weight:700;cursor:pointer;}
.link{color:#2563eb;cursor:pointer;text-decoration:underline;text-align:center;display:block;margin-top:12px;}
.error{color:#ef4444;text-align:center;font-size:14px;}
</style>
</head>
<body>

<div id="authStage" class="container">
  <div class="card" id="signinCard">
    <h2>Sign In</h2>
    <p class="muted">Use your Gmail to sign in.</p>
    <form onsubmit="event.preventDefault(); signinHandler(this)">
      <input type="email" name="email" placeholder="Gmail address" required>
      <input type="password" name="password" placeholder="Password" required>
      <div class="error" id="signinError"></div>
      <button type="submit">Sign In</button>
    </form>
    <span class="link" onclick="showSignup()">Don't have an account? Sign Up</span>
  </div>

  <div class="card" id="signupCard" style="display:none;">
    <h2>Create Account</h2>
    <p class="muted">Choose a plan and create your account.</p>
    <form onsubmit="event.preventDefault(); signupHandler(this)">
      <input type="text" name="name" placeholder="Full Name" required>
      <input type="email" name="email" placeholder="Gmail address" required>
      <input type="password" name="password" placeholder="Password" required>
      <select name="plan" required>
        <option value="">Select Plan</option>
        <option value="Free">Free</option>
        <option value="Paid">Paid</option>
      </select>
      <button type="submit">Create Account</button>
    </form>
    <span class="link" onclick="showSignin()">Already registered? Sign In</span>
    <div class="error" id="signupMsg"></div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded',()=>{
  const ACC_KEY='demo_accounts';
  let accounts=JSON.parse(localStorage.getItem(ACC_KEY)||'[]');

  if(accounts.length===0){
    accounts=[
      {name:'Demo User', email:'user1@gmail.com', password:'demo123', plan:'Free', created:new Date().toISOString()}
    ];
    localStorage.setItem(ACC_KEY,JSON.stringify(accounts));
  }

  const signinCard=document.getElementById('signinCard');
  const signupCard=document.getElementById('signupCard');
  const authStage=document.getElementById('authStage');
  const signinError=document.getElementById('signinError');
  const signupMsg=document.getElementById('signupMsg');

  let currentUser=sessionStorage.getItem('currentUser');
  if(currentUser && accounts.some(a=>a.email===currentUser)){
    // Dashboard will handle showing next
  }

  window.showSignin=()=>{
    signinCard.style.display='block';
    signupCard.style.display='none';
    signinError.textContent='';
    signupMsg.textContent='';
  }

  window.showSignup=()=>{
    signinCard.style.display='none';
    signupCard.style.display='block';
    signinError.textContent='';
    signupMsg.textContent='';
  }

  window.signinHandler=(form)=>{
    const email=form.email.value.trim().toLowerCase();
    const pwd=form.password.value;
    const acc=accounts.find(a=>a.email===email);
    if(!acc){signinError.textContent='Account not found. Please sign up.'; return;}
    if(acc.password!==pwd){signinError.textContent='Incorrect password.'; return;}
    currentUser=email;
    sessionStorage.setItem('currentUser',email);
    // Switch to dashboard handled in part 2
    document.dispatchEvent(new Event('showDashboard'));
  }

  window.signupHandler=(form)=>{
    const name=form.name.value.trim();
    const email=form.email.value.trim().toLowerCase();
    const pwd=form.password.value;
    const plan=form.plan.value;
    if(accounts.some(a=>a.email===email)){signupMsg.textContent='Email already exists. Please sign in.'; return;}
    accounts.push({name,email,password:pwd,plan,created:new Date().toISOString()});
    localStorage.setItem(ACC_KEY,JSON.stringify(accounts));
    signupMsg.textContent='Account created! Please sign in.';
    setTimeout(showSignin,1500);
    form.reset();
  }
});
</script>
<!-- Continue from Part 1 -->
<div class="dashboard" id="dashboard" style="display:none;flex-direction:column;padding:28px;min-height:100vh;background:#f8fafc;">
  <div class="topbar">
    <div class="brand">
      <div class="logo">AS</div>
      <div>
        <div class="welcome" id="dashWelcome">Welcome, User!</div>
        <div class="small" id="dashEmail">user@example.com</div>
      </div>
    </div>
    <button onclick="logout()">Logout</button>
  </div>
  <div class="card-dash">
    <h3 id="profileName">User Name</h3>
    <p class="small" id="profileEmail">user@example.com</p>
    <p class="small">Plan: <span id="profilePlan">Free</span></p>
    <p class="small">Member since: <span id="profileSince">-</span></p>
  </div>
</div>

<script>
document.addEventListener('showDashboard',()=>{
  const dashboard=document.getElementById('dashboard');
  const authStage=document.getElementById('authStage');
  dashboard.style.display='flex';
  authStage.style.display='none';

  const ACC_KEY='demo_accounts';
  let accounts=JSON.parse(localStorage.getItem(ACC_KEY)||'[]');
  let currentUser=sessionStorage.getItem('currentUser');
  const acc=accounts.find(a=>a.email===currentUser);

  document.getElementById('dashWelcome').textContent=`Welcome, ${acc.name}!`;
  document.getElementById('dashEmail').textContent=acc.email;
  document.getElementById('profileName').textContent=acc.name;
  document.getElementById('profileEmail').textContent=acc.email;
  document.getElementById('profilePlan').textContent=acc.plan;
  document.getElementById('profileSince').textContent=new Date(acc.created).toLocaleDateString();

  window.logout=()=>{
    sessionStorage.removeItem('currentUser');
    dashboard.style.display='none';
    authStage.style.display='flex';
  }
});
</script>
</body>
</html>
